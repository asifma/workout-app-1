(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{2400:function(e,t,r){"use strict";var s=r("8489"),a=r.n(s);a.a},"555f":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loader"})},a=[],l=(r("9a64"),r("2877")),o={},n=Object(l["a"])(o,s,a,!1,null,"74161296",null);t["a"]=n.exports},8489:function(e,t,r){},"9a64":function(e,t,r){"use strict";var s=r("eebd"),a=r.n(s);a.a},c66d:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Loader",{directives:[{name:"show",rawName:"v-show",value:!e.currentDBUser.id,expression:"!currentDBUser.id"}]}),e.currentDBUser&&e.currentDBUser.id?r("b-container",[r("b-row",[r("b-col",{staticClass:"text-center mb-3"},[e.currentDBUser.gravatar?r("b-img",{staticClass:"mb-4 avatar",attrs:{thumbnail:"",fluid:"",rounded:"circle",src:"https://www.gravatar.com/avatar/"+e.currentDBUser.gravatar+"?s=200",alt:"Profile"}}):e._e(),r("h4",[e._v(e._s(e.currentDBUser.name)+" "+e._s(e.currentDBUser.lastname))]),r("small",{staticClass:"text-muted"},[e._v("Last workout: TODO")])],1)],1),r("b-row",[e.workoutGoals.length>0?r("b-col",{staticClass:"mt-3 col-12 col-sm-6 col-lg-4"},[r("b-card",{staticClass:"mb-3 text-center",attrs:{tag:"article","bg-variant":"dark"}},[r("b-card-text",[r("img",{staticClass:"icon mt-2 mb-4",attrs:{src:e.publicPath+"img/icons/goals/"+e.currentDBUser.goal+".svg",alt:"Goal: "+e.goalName(e.currentDBUser.goal),title:"Goal: "+e.goalName(e.currentDBUser.goal)}}),r("h4",{staticClass:"mb-4"},[e._v("Goals")]),r("b-form",[r("b-form-group",{attrs:{label:"I will become "+e.goalName(e.currentDBUser.goal)}},[r("b-form-input",{attrs:{id:"goal-range",type:"range",min:e.workoutGoals[0].id,max:e.workoutGoals[e.workoutGoals.length-1].id},model:{value:e.currentDBUser.goal,callback:function(t){e.$set(e.currentDBUser,"goal",t)},expression:"currentDBUser.goal"}})],1)],1)],1)],1)],1):e._e(),e.workoutLevels.length>0?r("b-col",{staticClass:"mt-3 col-12 col-sm-6 col-lg-4"},[r("b-card",{staticClass:"mb-3 text-center",attrs:{tag:"article","bg-variant":"dark"}},[r("b-card-text",[r("img",{staticClass:"icon mt-2 mb-4",attrs:{src:e.publicPath+"img/icons/levels/"+e.currentDBUser.level+".svg",alt:"Level: "+e.levelName(e.currentDBUser.level),title:"Level: "+e.levelName(e.currentDBUser.level)}}),r("h4",{staticClass:"mb-4"},[e._v(e._s(e.levelName(e.currentDBUser.level)))]),r("b-form",[r("b-form-group",{attrs:{label:"Your current level"}},[r("b-form-input",{attrs:{id:"level-range",type:"range",min:e.workoutLevels[0].id,max:e.workoutLevels[e.workoutLevels.length-1].id},model:{value:e.currentDBUser.level,callback:function(t){e.$set(e.currentDBUser,"level",t)},expression:"currentDBUser.level"}})],1)],1)],1)],1)],1):e._e()],1)],1):e._e()],1)},a=[],l=(r("7f7f"),r("7514"),r("59ca")),o=r.n(l),n=r("17e1"),i=r("555f"),u={components:{Loader:i["a"]},data:function(){return{publicPath:"/",currentUser:o.a.auth().currentUser,currentDBUser:{},users:[],workoutGoals:[],workoutLevels:[]}},firebase:{users:n["a"].ref("users"),workoutGoals:n["a"].ref("workout-goals"),workoutLevels:n["a"].ref("workout-levels")},mounted:function(){var e=this;o.a.database().ref("users").once("value").then(function(t){e.currentDBUser=t.val().find(function(t){return t.email===e.currentUser.email})})},methods:{pushProfileSavedMessage:function(){this.$bvToast.toast("Profile saved.",{variant:"success",solid:!0,toaster:"b-toaster-top-left",autoHideDelay:2e3,noCloseButton:!0})},goalName:function(e){if(this.workoutGoals){var t=this.workoutGoals.find(function(t){return t.id===parseInt(e,10)});if(t)return t.name}return""},levelName:function(e){if(this.workoutLevels){var t=this.workoutLevels.find(function(t){return t.id===parseInt(e,10)});if(t)return t.name}return""},saveProfile:function(){for(var e=0,t=this.users.length;e<t;e++)this.users[e].id===this.currentDBUser.id&&(this.users[e]=this.currentDBUser);o.a.database().ref("users").set(this.users),this.pushProfileSavedMessage()}},watch:{"currentDBUser.level":function(e,t){t&&this.saveProfile()},"currentDBUser.goal":function(e,t){t&&this.saveProfile()}}},c=u,v=(r("2400"),r("2877")),f=Object(v["a"])(c,s,a,!1,null,"62c5993e",null);t["default"]=f.exports},eebd:function(e,t,r){}}]);